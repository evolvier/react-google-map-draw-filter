!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.GoogleMapDrawFilter=e()}}(function(){return function e(t,o,n){function r(i,l){if(!o[i]){if(!t[i]){var p="function"==typeof require&&require;if(!l&&p)return p(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var f=o[i]={exports:{}};t[i][0].call(f.exports,function(e){var o=t[i][1][e];return r(o?o:e)},f,f.exports,e,t,o,n)}return o[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e,t,o){t.exports=function(e,t){for(var o=e[0],n=e[1],r=!1,a=0,i=t.length-1;a<t.length;i=a++){var l=t[a][0],p=t[a][1],u=t[i][0],f=t[i][1],s=p>n!=f>n&&o<(u-l)*(n-p)/(f-p)+l;s&&(r=!r)}return r}},{}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){e=e||{};var t=e.apiKey,o=e.libraries||[],n=e.client,r="https://maps.googleapis.com/maps/api/js",a="3.25",i=(window.google=null,null),l=null,p=null,u=function f(){var f=r,e={key:t,callback:"CALLBACK_NAME",libraries:o.join(","),client:n,v:a,channel:i,language:l,region:p},u=Object.keys(e).filter(function(t){return!!e[t]}).map(function(t){return t+"="+e[t]}).join("&");return f+"?"+u};return u()};o.GoogleApi=n,o["default"]=n},{}],3:[function(e,t,o){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function(e,t,o){for(var n=!0;n;){var r=e,a=t,i=o;n=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,a);if(void 0!==l){if("value"in l)return l.value;var p=l.get;if(void 0===p)return;return p.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,o=i,n=!0,l=u=void 0}},p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u="undefined"!=typeof window?window.React:"undefined"!=typeof t?t.React:null,f=n(u),s=e("react-dom"),c=n(s),d=e("./ScriptCache"),g=n(d),y=e("./GoogleApi"),v=n(y),h={},m=function(e){return function(t){var o=e.apiKey,n=(e.libraries||["places"],function(e){function n(e,t){r(this,n),l(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e,t),this.state={loaded:!1,map:null,google:null}}return a(n,e),i(n,[{key:"componentDidMount",value:function(){var e=this,t=this.refs;this.scriptCache.google.onLoad(function(o,n){var r=window.google.maps,a=(p({},e.props,{loaded:e.state.loaded}),t.map),i=c["default"].findDOMNode(a),l=new r.LatLng(e.props.lat,e.props.lng),u=p({},h,{center:l,zoom:e.props.zoom});e.map=new r.Map(i,u),e.setState({loaded:!0,map:e.map,google:window.google})})}},{key:"componentWillMount",value:function(){this.scriptCache=(0,g["default"])({google:(0,v["default"])({apiKey:o,libraries:["drawing"]})})}},{key:"render",value:function(){var e=p({},this.props,{loaded:this.state.loaded,map:this.state.map,google:this.state.google,mapComponent:this.refs.map});return f["default"].createElement("div",null,f["default"].createElement(t,e),f["default"].createElement("div",{ref:"map"}))}}]),n}(f["default"].Component));return n}};o.wrapper=m,o["default"]=m}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./GoogleApi":2,"./ScriptCache":4,"react-dom":void 0}],4:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=0,r=new Map,a=function(e){return function(t){var o={};return o._onLoad=function(e){return function(t){var o=r.get(e);o&&o.promise.then(function(){o.error?t(o.error):t(null,o)})}},o._scriptTag=function(t,o){return r.has(t)||!function(){var a=document.createElement("script"),i=new Promise(function(i,l){var p=document.getElementsByTagName("body")[0];a.type="text/javascript",a.async=!1;var u="loaderCB"+n++ +Date.now(),f=void 0,s=function(){e[u]&&"function"==typeof e[u]&&(e[u]=null)},c=function(e){return function(n){var a=r.get(t);"loaded"===e?(a.resolved=!0,i(o)):"error"===e&&(a.errored=!0,l(n)),s()}};return a.onload=c("loaded"),a.onerror=c("error"),a.onreadystatechange=function(){c(a.readyState)},o.match(/callback=CALLBACK_NAME/)?(o=o.replace(/(callback=)[^\&]+/,"$1"+u),f=window[u]=a.onload):a.addEventListener("load",a.onload),a.addEventListener("error",a.onerror),a.src=o,p.appendChild(a),a}),l={loaded:!1,error:!1,promise:i,tag:a};r.set(t,l)}(),r.get(t)},Object.keys(t).forEach(function(e){var n=t[e];o[e]={tag:o._scriptTag(e,n),onLoad:o._onLoad(e)}}),o}}(window);o.ScriptCache=a,o["default"]=a},{}],5:[function(e,t,o){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(o,"__esModule",{value:!0});var l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),p=function(e,t,o){for(var n=!0;n;){var r=e,a=t,i=o;n=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,a);if(void 0!==l){if("value"in l)return l.value;var p=l.get;if(void 0===p)return;return p.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,o=i,n=!0,l=u=void 0}},u="undefined"!=typeof window?window.React:"undefined"!=typeof n?n.React:null,f=r(u),s=e("./ApiComponents/ScriptCache"),c=(r(s),e("./ApiComponents/GoogleApi")),d=(r(c),e("./ApiComponents/GoogleApiComponent")),g=r(d),y=e("./Map"),v=r(y),h=void 0,m=function(e){function t(){a(this,t),p(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),l(t,[{key:"componentWillMount",value:function(){h=this.props.apiKey}},{key:"render",value:function(){return f["default"].createElement("div",null,f["default"].createElement(v["default"],{google:this.props.google,drawMode:this.props.drawMode,markers:this.props.markers,mapConfig:this.props.mapConfig,mapStyle:this.props.mapStyle,polygonOptions:this.props.polygonOptions,handleReturnedMarkers:this.props.handleReturnedMarkers,onMarkerClick:this.props.onMarkerClick}))}}]),t}(f["default"].Component);m.propTypes={apiKey:f["default"].PropTypes.string.isRequired,drawMode:f["default"].PropTypes.bool,markers:f["default"].PropTypes.array,mapConfig:f["default"].PropTypes.object,polygonOptions:f["default"].PropTypes.object,google:f["default"].PropTypes.object,mapStyle:f["default"].PropTypes.object,handleReturnedMarkers:f["default"].PropTypes.func,onMarkerClick:f["default"].PropTypes.func},m.defaultProps={drawMode:!0,mapConfig:{zoom:14,lat:41.384279176844764,lng:2.1526336669921875},mapStyle:{height:"600px",width:"600px"},polygonOptions:{fillColor:"#455A64",fillOpacity:.3,strokeColor:"#455A64",strokeWeight:3,clickable:!0,editable:!0,zIndex:1},markers:[]},o["default"]=(0,g["default"])({apiKey:h})(m),t.exports=o["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ApiComponents/GoogleApi":2,"./ApiComponents/GoogleApiComponent":3,"./ApiComponents/ScriptCache":4,"./Map":6}],6:[function(e,t,o){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(o,"__esModule",{value:!0});var l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),p=function(e,t,o){for(var n=!0;n;){var r=e,a=t,i=o;n=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,a);if(void 0!==l){if("value"in l)return l.value;var p=l.get;if(void 0===p)return;return p.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,o=i,n=!0,l=u=void 0}},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},f="undefined"!=typeof window?window.React:"undefined"!=typeof n?n.React:null,s=r(f),c=e("react-dom"),d=r(c),g=e("point-in-polygon"),y=r(g),v=[],h=function(e){function t(){a(this,t),p(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.state={drawMode:!1}}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.loadMap()}},{key:"componentDidUpdate",value:function(e,t){e.google!==this.props.google&&(this.loadMap(),this.props.drawMode&&this.drawPolyline())}},{key:"componentWillReceiveProps",value:function(e){this.props.google;this.props.drawMode!==e.drawMode&&e.drawMode&&this.props.google&&this.drawPolyline()}},{key:"drawPolyline",value:function(){var e=this.props.google,t=new e.maps.drawing.DrawingManager({drawingMode:e.maps.drawing.OverlayType.POLYGON,drawingControl:!1,polygonOptions:this.props.polygonOptions});t.setMap(this.map),e.maps.event.addListener(t,"polygoncomplete",function(o){var n=this;t.setDrawingMode(null);var r=o.getPath();e.maps.event.addListener(o,"click",function(e){o.setMap(null),r=[],n.getMarkers(),n.drawPolyline()});var a=function(){var e=[],t=[];r.forEach(function(t){e.push([t.lat(),t.lng()])}),v.forEach(function(o){var r=o.getPosition().lat(),a=o.getPosition().lng();(0,y["default"])([r,a],e)?(t.push(o),o.map||o.setMap(n.map)):o.setMap(null)}),n.props.handleReturnedMarkers&&n.props.handleReturnedMarkers(t)};a(),e.maps.event.addListener(r,"set_at",function(e){r=o.getPath(),a()}),e.maps.event.addListener(r,"insert_at",function(e){r=o.getPath(),a()})}.bind(this))}},{key:"getMarkers",value:function(){var e=this,t=this.props.google,o=t.maps;this.props.markers.forEach(function(n){var r=u({},n,{position:new t.maps.LatLng(n.latLng.lng,n.latLng.lat),map:e.map}),a=new o.Marker(r);e.props.onMarkerClick&&t.maps.event.addListener(a,"click",function(t){e.props.onMarkerClick(a)}),a.info&&!function(){var o=new t.maps.InfoWindow({content:a.info});t.maps.event.addListener(a,"click",function(t){o.open(e.map,a)})}(),v.push(a)})}},{key:"loadMap",value:function(){if(this.props&&this.props.google){var e=this.props.google,t=e.maps,o=this.refs.map,n=d["default"].findDOMNode(o),r=this.props.mapConfig,a=r.zoom,i=r.lat,l=r.lng,p=new t.LatLng(i,l),f=u({},{center:p,zoom:a});this.map=new t.Map(n,f),this.getMarkers()}}},{key:"render",value:function(){return s["default"].createElement("div",{style:this.props.mapStyle,ref:"map"},"Loading map...")}}]),t}(s["default"].Component);o["default"]=h,t.exports=o["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"point-in-polygon":1,"react-dom":void 0}]},{},[5])(5)});